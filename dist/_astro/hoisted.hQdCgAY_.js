import"./hoisted.CNm4v15S.js";document.getElementById("newsForm")?.addEventListener("submit",async a=>{a.preventDefault();const o=a.target,s=o.dataset.articleId,t=new FormData(o),n=t.get("image");let i=t.get("image_current");if(n?.size>0){const e=new FormData;e.append("file",n);try{const r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok)throw new Error("Failed to upload image");const{url:l}=await r.json();i=l}catch(r){console.error("Error uploading image:",r),alert("Error uploading image");return}}const c={title:t.get("title"),summary:t.get("summary"),content:t.get("content"),image:i,published:t.get("published")==="on"};try{const e=await fetch(`/api/news/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!e.ok){const r=await e.json();throw new Error(r.message||"Error updating article")}window.location.href="/admin/news"}catch(e){console.error("Error:",e),alert(e instanceof Error?e.message:"Error updating article")}});
