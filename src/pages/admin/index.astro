---
import Layout from '../../layouts/Layout.astro';
import { supabase } from '../../lib/supabase'; // Assurez-vous que ce fichier initialise le client Supabase

// Ne pas pré-rendre la page pour permettre la vérification dynamique de session
export const prerender = false;

// Récupérer la session utilisateur
const { data: { session }, error } = await supabase.auth.getSession();

if (!session) {
  // Redirige vers la page de connexion si l'utilisateur n'est pas authentifié
  return Astro.redirect('/login');
}
---

<Layout title="Administration">
  <div class="max-w-4xl mx-auto py-8">
    <h1 class="text-3xl font-bold text-primary mb-8">Administration</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <a href="/admin/clubs" class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
        <h2 class="text-xl font-bold text-primary mb-2">Gestion des Clubs</h2>
        <p class="text-gray-600">Gérer les clubs et le classement</p>
      </a>

      <a href="/admin/matches" class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
        <h2 class="text-xl font-bold text-primary mb-2">Gestion des Matchs</h2>
        <p class="text-gray-600">Créer, modifier et supprimer des matchs</p>
      </a>
      
      <a href="/admin/players" class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
        <h2 class="text-xl font-bold text-primary mb-2">Gestion des Joueurs</h2>
        <p class="text-gray-600">Gérer l'effectif de l'équipe</p>
      </a>

      <a href="/admin/news" class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
        <h2 class="text-xl font-bold text-primary mb-2">Gestion des Articles</h2>
        <p class="text-gray-600">Gérer les articles du KDA</p>
      </a>
    </div>
  </div>
</Layout>
